#![no_main]
sphinx_zkvm::entrypoint!(main);

extern "C" {
    fn syscall_bls12381_g2_double(p: *mut u32);
}

pub fn main() {
    for _ in 0..10i64.pow(3) {
        // generator.
        let mut a: [u8; 192] = [
            184, 189, 33, 193, 200, 86, 128, 212, 239, 187, 5, 168, 38, 3, 172, 11, 119, 209, 227,
            122, 100, 11, 81, 180, 2, 59, 64, 250, 212, 122, 228, 198, 81, 16, 197, 45, 39, 5, 8,
            38, 145, 10, 143, 240, 178, 162, 74, 2, 126, 43, 4, 93, 5, 125, 172, 229, 87, 93, 148,
            19, 18, 241, 76, 51, 73, 80, 127, 220, 187, 97, 218, 181, 26, 182, 32, 153, 208, 208,
            107, 89, 101, 79, 39, 136, 160, 211, 172, 125, 96, 159, 113, 82, 96, 43, 224, 19, 1,
            40, 184, 8, 134, 84, 147, 225, 137, 162, 172, 59, 204, 201, 58, 146, 44, 209, 96, 81,
            105, 154, 66, 109, 167, 211, 189, 140, 170, 155, 253, 173, 26, 53, 46, 218, 198, 205,
            201, 140, 17, 110, 125, 114, 39, 213, 229, 12, 190, 121, 95, 240, 95, 7, 169, 170, 161,
            29, 236, 92, 39, 13, 55, 63, 171, 153, 46, 87, 171, 146, 116, 38, 175, 99, 167, 133,
            126, 40, 62, 203, 153, 139, 194, 43, 176, 210, 172, 50, 204, 52, 167, 46, 160, 196, 6,
            6,
        ];

        unsafe {
            syscall_bls12381_g2_double(a.as_mut_ptr() as *mut u32);
        }

        // 2 * generator.
        let b: [u8; 192] = [
            83, 160, 39, 184, 202, 170, 82, 201, 120, 27, 97, 243, 11, 75, 241, 129, 174, 219, 0,
            77, 30, 30, 234, 225, 14, 94, 130, 184, 149, 185, 192, 59, 134, 213, 126, 204, 23, 15,
            55, 210, 169, 64, 213, 87, 57, 83, 56, 22, 119, 53, 195, 71, 140, 40, 120, 97, 42, 199,
            126, 181, 246, 134, 200, 198, 114, 21, 30, 3, 209, 20, 129, 114, 116, 16, 186, 4, 169,
            98, 6, 215, 79, 18, 10, 115, 71, 14, 82, 159, 114, 127, 237, 193, 249, 222, 78, 10,
            153, 152, 76, 30, 215, 149, 157, 153, 189, 243, 75, 118, 233, 236, 141, 232, 138, 170,
            71, 30, 34, 189, 230, 191, 156, 0, 145, 191, 105, 218, 102, 154, 120, 86, 82, 43, 202,
            141, 235, 10, 99, 176, 130, 13, 68, 251, 104, 4, 243, 204, 54, 110, 139, 253, 222, 172,
            103, 137, 156, 165, 160, 26, 46, 66, 245, 8, 195, 19, 122, 63, 0, 151, 22, 65, 108,
            198, 217, 83, 50, 164, 54, 113, 136, 63, 84, 97, 179, 56, 38, 221, 101, 250, 82, 69,
            109, 15,
        ];

        assert_eq!(a, b);
    }

    println!("done");
}
